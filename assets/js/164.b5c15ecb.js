(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{573:function(t,a,e){"use strict";e.r(a);var s=e(2),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"kafka集群部署指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kafka集群部署指南"}},[t._v("#")]),t._v(" Kafka集群部署指南")]),t._v(" "),a("h2",{attrs:{id:"一、前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[t._v("#")]),t._v(" 一、前言")]),t._v(" "),a("h3",{attrs:{id:"_1、kafka简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、kafka简介"}},[t._v("#")]),t._v(" 1、Kafka简介")]),t._v(" "),a("p",[t._v("Kafka是一个开源的分布式消息引擎/消息中间件，同时Kafka也是一个流处理平台。Kakfa支持以发布/订阅的方式在应用间传递消息，同时并基于消息功能添加了Kafka Connect、Kafka Streams以支持连接其他系统的数据("),a("a",{attrs:{href:"https://ken.io/note/elk-deploy-guide",target:"_blank",rel:"noopener noreferrer"}},[t._v("Elasticsearch"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://ken.io/note/hadoop-cluster-deploy-guide",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hadoop"),a("OutboundLink")],1),t._v("等)")]),t._v(" "),a("p",[t._v("Kafka最核心的最成熟的还是他的消息引擎，所以Kafka大部分应用场景还是用来作为消息队列削峰平谷。另外，Kafka也是目前性能最好的消息中间件。")]),t._v(" "),a("h3",{attrs:{id:"_2、kafka架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、kafka架构"}},[t._v("#")]),t._v(" 2、Kafka架构")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://img.liuwenqi.com/blog/2019-07-21-035504.jpg",alt:""}})]),t._v(" "),a("p",[t._v("在Kafka集群(Cluster)中，一个Kafka节点就是一个Broker，消息由Topic来承载，可以存储在1个或多个Partition中。发布消息的应用为Producer、消费消息的应用为Consumer，多个Consumer可以促成Consumer Group共同消费一个Topic中的消息。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("概念/对象")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("简单说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Broker")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Kafka节点")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Topic")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("主题，用来承载消息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Partition")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("分区，用于主题分片存储")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Producer")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("生产者，向主题发布消息的应用")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Consumer")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("消费者，从主题订阅消息的应用")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Consumer Group")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("消费者组，由多个消费者组成")])])])]),t._v(" "),a("h3",{attrs:{id:"_3、准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、准备工作"}},[t._v("#")]),t._v(" 3、准备工作")]),t._v(" "),a("h4",{attrs:{id:"_1、kafka服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、kafka服务器"}},[t._v("#")]),t._v(" 1、Kafka服务器")]),t._v(" "),a("p",[t._v("准备3台CentOS服务器，并配置好静态IP、主机名")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("服务器名")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("IP")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("kafka01(elk-1)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("172.16.249.101")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Kafka节点1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("kafka02(elk-2)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("172.16.249.102")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Kafka节点2")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("kafka03(elk-3)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("172.16.249.103")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Kafka节点3")])])])]),t._v(" "),a("p",[t._v("软件版本说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("项")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Linux Server")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("CentOS 7")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Kafka")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("2.3.0")])])])]),t._v(" "),a("h4",{attrs:{id:"_2、zookeeper集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、zookeeper集群"}},[t._v("#")]),t._v(" 2、ZooKeeper集群")]),t._v(" "),a("p",[t._v("Kakfa集群需要依赖ZooKeeper存储Broker、Topic等信息，这里我们部署三台ZK")]),t._v(" "),a("h2",{attrs:{id:"二、部署过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、部署过程"}},[t._v("#")]),t._v(" 二、部署过程")]),t._v(" "),a("h3",{attrs:{id:"_1、应用-数据目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、应用-数据目录"}},[t._v("#")]),t._v(" 1、应用&数据目录")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建应用目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /usr/kafka\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建Kafka数据目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /kafka\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /kafka/logs\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-R")]),t._v(" /kafka\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h3",{attrs:{id:"_2、下载-解压"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、下载-解压"}},[t._v("#")]),t._v(" 2、下载&解压")]),t._v(" "),a("p",[t._v("Kafka官方下载地址："),a("a",{attrs:{href:"https://kafka.apache.org/downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://kafka.apache.org/down..."),a("OutboundLink")],1),t._v("\n这次我下载的是2.3.0版本")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进入 opt下")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#下载安装包")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://mirrors.tuna.tsinghua.edu.cn/apache/kafka/2.3.0/kafka_2.12-2.3.0.tgz \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建应用目录，并解压到应用目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /usr/kafka \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-zvxf")]),t._v(" kafka_2.12-2.3.0.tgz "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-C")]),t._v(" /usr/kafka\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建日志目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-pv")]),t._v(" /kafka/logs\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("blockquote",[a("p",[t._v("kafka_2.12-2.3.0.tgz 其中2.12是Scala编译器的版本，2.3.0才是Kafka的版本")])]),t._v(" "),a("h3",{attrs:{id:"_3、kafka节点配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、kafka节点配置"}},[t._v("#")]),t._v(" 3、Kafka节点配置")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进入应用目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/kafka/kafka_2.12-2.3.0/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改配置文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" config/server.properties\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h4",{attrs:{id:"通用配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通用配置"}},[t._v("#")]),t._v(" 通用配置")]),t._v(" "),a("p",[t._v("配置日志目录、指定ZooKeeper服务器")]),t._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# A comma separated list of directories under which to store log files")]),t._v("\nlog.dirs=/kafka/logs\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# root directory for all kafka znodes.")]),t._v("\nzookeeper.connect=elk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("elk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("elk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h4",{attrs:{id:"分节点配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分节点配置"}},[t._v("#")]),t._v(" 分节点配置")]),t._v(" "),a("ul",[a("li",[t._v("Kafka01")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("broker.id=0\n\n#listeners=PLAINTEXT://:9092\nlisteners=PLAINTEXT://elk-1:9092\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("ul",[a("li",[t._v("Kafka02")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("broker.id=1\n\n#listeners=PLAINTEXT://:9092\nlisteners=PLAINTEXT://elk-2:9092\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("ul",[a("li",[t._v("Kafka03")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("broker.id=2\n\n#listeners=PLAINTEXT://:9092\nlisteners=PLAINTEXT://elk-3:9092\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"_5、启动kafka"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、启动kafka"}},[t._v("#")]),t._v(" 5、启动Kafka")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#进入kafka根目录\ncd /usr/kafka/kafka_2.12-2.3.0/\n#启动\nnohup ./bin/kafka-server-start.sh config/server.properties &\n\n#启动成功输出示例(最后几行)\n[2019-06-26 21:48:57,183] INFO Kafka commitId: fc1aaa116b661c8a (org.apache.kafka.common.utils.AppInfoParser)\n[2019-06-26 21:48:57,183] INFO Kafka startTimeMs: 1561531737175 (org.apache.kafka.common.utils.AppInfoParser)\n[2019-06-26 21:48:57,185] INFO [KafkaServer id=0] started (kafka.server.KafkaServer)\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h2",{attrs:{id:"三、kafka测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、kafka测试"}},[t._v("#")]),t._v(" 三、Kafka测试")]),t._v(" "),a("h3",{attrs:{id:"_1、创建topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建topic"}},[t._v("#")]),t._v(" 1、创建Topic")]),t._v(" "),a("p",[t._v("在kafka01(Broker)上创建测试Tpoic：test-ken-io，这里我们指定了3个副本、1个分区")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("bin/kafka-topics.sh --create --bootstrap-server 192.168.88.51:9092 --replication-factor 3 --partitions 1 --topic test-ken-io\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("Topic在kafka01上创建后也会同步到集群中另外两个Broker：kafka02、kafka03")]),t._v(" "),a("h3",{attrs:{id:"_2、查看topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、查看topic"}},[t._v("#")]),t._v(" 2、查看Topic")]),t._v(" "),a("p",[t._v("我们可以通过命令列出指定Broker的")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("bin/kafka-topics.sh --list --bootstrap-server 192.168.88.52:9092\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3、发送消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、发送消息"}},[t._v("#")]),t._v(" 3、发送消息")]),t._v(" "),a("p",[t._v("这里我们向Broker(id=0)的Topic=test-ken-io发送消息")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("bin/kafka-console-producer.sh --broker-list  192.168.88.51:9092  --topic test-ken-io\n\n#消息内容\n> test by ken.io\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"_4、消费消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、消费消息"}},[t._v("#")]),t._v(" 4、消费消息")]),t._v(" "),a("p",[t._v("在Kafka02上消费Broker03的消息")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("bin/kafka-console-consumer.sh --bootstrap-server 192.168.88.53:9092 --topic test-ken-io --from-beginning\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("在Kafka03上消费Broker02的消息")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("bin/kafka-console-consumer.sh --bootstrap-server 192.168.88.52:9092 --topic test-ken-io --from-beginning\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("然后均能收到消息")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("test by ken.io\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("这是因为这两个消费消息的命令是建立了两个不同的Consumer\n如果我们启动Consumer指定Consumer Group Id就可以作为一个消费组协同工，1个消息同时只会被一个Consumer消费到")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("bin/kafka-console-consumer.sh --bootstrap-server 192.168.88.53:9092 --topic test-ken-io --from-beginning --group testgroup_ken\n\nbin/kafka-console-consumer.sh --bootstrap-server 192.168.88.52:9092 --topic test-ken-io --from-beginning --group testgroup_ken\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h2",{attrs:{id:"四、备注"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、备注"}},[t._v("#")]),t._v(" 四、备注")]),t._v(" "),a("h3",{attrs:{id:"_1、kafka常用配置项说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、kafka常用配置项说明"}},[t._v("#")]),t._v(" 1、Kafka常用配置项说明")]),t._v(" "),a("p",[t._v("Kafka常用Broker配置说明：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("配置项")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("默认值/示例值")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("broker.id")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("0")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Broker唯一标识")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("listeners")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("PLAINTEXT://192.168.88.53:9092")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("监听信息，PLAINTEXT表示明文传输")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("log.dirs")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("kafka/logs")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v('kafka数据存放地址，可以填写多个。用","间隔')])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("message.max.bytes")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("message.max.bytes")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("单个消息长度限制，单位是字节")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("num.partitions")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("1")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("默认分区数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("log.flush.interval.messages")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Long.MaxValue")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("在数据被写入到硬盘和消费者可用前最大累积的消息的数量")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("log.flush.interval.ms")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Long.MaxValue")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("在数据被写入到硬盘前的最大时间")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("log.flush.scheduler.interval.ms")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Long.MaxValue")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("检查数据是否要写入到硬盘的时间间隔。")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("log.retention.hours")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("24")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("控制一个log保留时间，单位：小时")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("zookeeper.connect")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("192.168.88.21:2181")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v('ZooKeeper服务器地址，多台用","间隔')])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);