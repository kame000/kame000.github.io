(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{534:function(a,t,s){"use strict";s.r(t);var e=s(2),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"filebeat-安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#filebeat-安装配置"}},[a._v("#")]),a._v(" filebeat 安装配置")]),a._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("p",[a._v("把filebeat RPM包 传输至安装服务器")]),a._v(" "),t("p",[t("code",[a._v("rpm -ivh filebeat-6.1.1-x86_64.rpm")])]),a._v(" "),t("h2",{attrs:{id:"修改配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[a._v("#")]),a._v(" 修改配置文件")]),a._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[a._v("   vim /etc/filebeat/filebeat.yml\n  参照如下进行修改：\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" log\n     "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("paths")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" /log/XXXX/all/XXXXX.log "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 例如为mysql日志路径文件")]),a._v("\n\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##IP地址为elasticsearch地址")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("output.elasticsearch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Array of hosts to connect to.")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10.XX.XX.XX:9200"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 修改huidu为mysql或者 MongoDB")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("output.elasticsearch.index")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"XXX-%{[beat.version]}-%{+yyyy.MM.dd}"')]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("setup.template.name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"XXXX"')]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("setup.template.pattern")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"XXXX-*"')]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br")])]),t("h2",{attrs:{id:"启动filebeat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动filebeat"}},[a._v("#")]),a._v(" 启动filebeat")]),a._v(" "),t("p",[t("code",[a._v("service filebeat start")]),a._v("\n检查下是否成功启动\n"),t("code",[a._v("ps -ef | grep filebeat")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@Dxe18v12v82 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ps -ef | grep filebeat")]),a._v("\n      root     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21515")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21501")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(":10 pts/2    00:00:00 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" filebeat\n      root     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28385")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" Mar01 ?        00:00:00 /usr/share/filebeat/bin/filebeat-god "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" / "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /var/run/filebeat.pid -- /usr/share/filebeat/bin/filebeat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" /etc/filebeat/filebeat.yml "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path.home")]),a._v(" /usr/share/filebeat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path.config")]),a._v(" /etc/filebeat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path.data")]),a._v(" /var/lib/filebeat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path.logs")]),a._v(" /var/log/filebeat\n      root     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28386")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28385")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" Mar01 ?        00:02:44 /usr/share/filebeat/bin/filebeat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" /etc/filebeat/filebeat.yml "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path.home")]),a._v(" /usr/share/filebeat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path.config")]),a._v(" /etc/filebeat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path.data")]),a._v(" /var/lib/filebeat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path.logs")]),a._v(" /var/log/filebeat\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);