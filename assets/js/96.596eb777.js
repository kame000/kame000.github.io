(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{501:function(a,s,e){"use strict";e.r(s);var t=e(2),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"清除表信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清除表信息"}},[a._v("#")]),a._v(" 清除表信息")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/sh")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\nmodprobe ipt_MASQUERADE\nmodprobe ip_conntrack_ftp\nmodprobe ip_nat_ftp\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v("\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" nat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v("\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-X")]),a._v("\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" nat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-X")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"input键"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#input键"}},[a._v("#")]),a._v(" INPUT键")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" INPUT DROP\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" state "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--state")]),a._v(" ESTABLISHED,RELATED "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" multiport "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dports")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("110,80")]),a._v(",25 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.0/24 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("139")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h3",{attrs:{id:"允许内网samba-smtp-pop3-连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#允许内网samba-smtp-pop3-连接"}},[a._v("#")]),a._v(" 允许内网samba,smtp,pop3,连接")]),a._v(" "),s("p",[s("code",[a._v("iptables -A INPUT -i eth1 -p udp -m multiport --dports 53 -j ACCEPT")])]),a._v(" "),s("h3",{attrs:{id:"允许dns连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#允许dns连接"}},[a._v("#")]),a._v(" 允许dns连接")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1723")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" gre "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"允许外网vpn连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#允许外网vpn连接"}},[a._v("#")]),a._v(" 允许外网vpn连接")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.186")]),a._v(".0.0/24 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" state "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--state")]),a._v(" ESTABLISHED,RELATED "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" ppp0 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--syn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" connlimit --connlimit-above "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"为了防止dos太多连接进来-那么可以允许最多15个初始连接-超过的丢弃"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为了防止dos太多连接进来-那么可以允许最多15个初始连接-超过的丢弃"}},[a._v("#")]),a._v(" 为了防止DOS太多连接进来,那么可以允许最多15个初始连接,超过的丢弃")]),a._v(" "),s("p",[s("code",[a._v("iptables -A INPUT -s 192.186.0.0/24 -p tcp --syn -m connlimit --connlimit-above 15 -j DROP")])]),a._v(" "),s("h3",{attrs:{id:"为了防止dos太多连接进来-那么可以允许最多15个初始连接-超过的丢弃-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为了防止dos太多连接进来-那么可以允许最多15个初始连接-超过的丢弃-2"}},[a._v("#")]),a._v(" 为了防止DOS太多连接进来,那么可以允许最多15个初始连接,超过的丢弃")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" limit "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--limit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("/s "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" LOG --log-level INFO --log-prefix "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ICMP packet IN: "')]),a._v("\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"禁止icmp通信-ping-不通"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#禁止icmp通信-ping-不通"}},[a._v("#")]),a._v(" 禁止icmp通信-ping 不通")]),a._v(" "),s("p",[s("code",[a._v("iptables -t nat -A POSTROUTING -o ppp0 -s 192.168.0.0/24 -j MASQUERADE")])]),a._v(" "),s("h3",{attrs:{id:"内网转发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内网转发"}},[a._v("#")]),a._v(" 内网转发")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-N")]),a._v(" syn-flood\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--syn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" syn-flood\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" syn-flood "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" limit "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--limit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("/s --limit-burst "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" RETURN\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" syn-flood "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" REJECT\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h3",{attrs:{id:"防止syn攻击-轻量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#防止syn攻击-轻量"}},[a._v("#")]),a._v(" 防止SYN攻击 轻量")]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"forward链"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#forward链"}},[a._v("#")]),a._v(" FORWARD链")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" FORWARD DROP\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.0/24 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" multiport "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dports")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80,110")]),a._v(",21,25,1723 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" udp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.0/24 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("53")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" gre "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.0/24 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.0/24 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h3",{attrs:{id:"允许-vpn客户走vpn网络连接外网"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#允许-vpn客户走vpn网络连接外网"}},[a._v("#")]),a._v(" 允许 vpn客户走vpn网络连接外网")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" state "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--state")]),a._v(" ESTABLISHED,RELATED "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" udp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("53")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" string "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--string")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tencent"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("time")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--timestart")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(":15 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--timestop")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(":30 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--days")]),a._v(" Mon,Tue,Wed,Thu,Fri,Sat  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"星期一到星期六的8-00-12-30禁止qq通信"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#星期一到星期六的8-00-12-30禁止qq通信"}},[a._v("#")]),a._v(" 星期一到星期六的8:00-12:30禁止qq通信")]),a._v(" "),s("p",[s("code",[a._v('iptables -I FORWARD -p udp --dport 53 -m string --string "TENCENT" -m time --timestart 8:15 --timestop 12:30 --days Mon,Tue,Wed,Thu,Fri,Sat -j DROP')])]),a._v(" "),s("h3",{attrs:{id:"星期一到星期六的8-00-12-30禁止qq通信-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#星期一到星期六的8-00-12-30禁止qq通信-2"}},[a._v("#")]),a._v(" 星期一到星期六的8:00-12:30禁止qq通信")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" udp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("53")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" string "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--string")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tencent"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("time")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--timestart")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("13")]),a._v(":30 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--timestop")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),a._v(":30 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--days")]),a._v(" Mon,Tue,Wed,Thu,Fri,Sat  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" udp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("53")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" string "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--string")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TENCENT"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("time")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--timestart")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("13")]),a._v(":30 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--timestop")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),a._v(":30 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--days")]),a._v(" Mon,Tue,Wed,Thu,Fri,Sat  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"星期一到星期六的13-30-20-30禁止qq通信"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#星期一到星期六的13-30-20-30禁止qq通信"}},[a._v("#")]),a._v(" 星期一到星期六的13:30-20:30禁止QQ通信")]),a._v(" "),s("p",[s("code",[a._v('iptables -I FORWARD -s 192.168.0.0/24 -m string --string "qq.com" -m time --timestart 8:15 --timestop 12:30 --days Mon,Tue,Wed,Thu,Fri,Sat -j DROP')])]),a._v(" "),s("h3",{attrs:{id:"星期一到星期六的8-00-12-30禁止qq网页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#星期一到星期六的8-00-12-30禁止qq网页"}},[a._v("#")]),a._v(" 星期一到星期六的8:00-12:30禁止qq网页")]),a._v(" "),s("p",[s("code",[a._v('iptables -I FORWARD -s 192.168.0.0/24 -m string --string "qq.com" -m time --timestart 13:00 --timestop 20:30 --days Mon,Tue,Wed,Thu,Fri,Sat -j DROP')])]),a._v(" "),s("h3",{attrs:{id:"星期一到星期六的13-30-20-30禁止qq网页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#星期一到星期六的13-30-20-30禁止qq网页"}},[a._v("#")]),a._v(" 星期一到星期六的13:30-20:30禁止QQ网页")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.0/24 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" string "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--string")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ay2000.net"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.0/24 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" string "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--string")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"宽频影院"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.0/24 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" string "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--string")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"色情"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--sport")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" string "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--string")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"广告"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h3",{attrs:{id:"禁止ay2000-net-宽频影院-色情-广告网页连接-但中文-不是很理想"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#禁止ay2000-net-宽频影院-色情-广告网页连接-但中文-不是很理想"}},[a._v("#")]),a._v(" 禁止ay2000.net，宽频影院，色情，广告网页连接 ！但中文 不是很理想")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" ipp2p "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--edk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--kazaa")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--bit")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" ipp2p "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--ares")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" udp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" ipp2p "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--kazaa")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"禁止bt连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#禁止bt连接"}},[a._v("#")]),a._v(" 禁止BT连接")]),a._v(" "),s("p",[s("code",[a._v("iptables -A FORWARD -p tcp --syn --dport 80 -m connlimit --connlimit-above 15 --connlimit-mask 24")])]),a._v(" "),s("hr"),a._v(" "),s("h3",{attrs:{id:"打开转发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打开转发"}},[a._v("#")]),a._v(" 打开转发")]),a._v(" "),s("p",[s("code",[a._v("sysctl -w net.ipv4.ip_forward=1 &>/dev/null")])]),a._v(" "),s("h3",{attrs:{id:"打开-syncookie-轻量级预防-dos-攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打开-syncookie-轻量级预防-dos-攻击"}},[a._v("#")]),a._v(" 打开 syncookie （轻量级预防 DOS 攻击）")]),a._v(" "),s("p",[s("code",[a._v("sysctl -w net.ipv4.tcp_syncookies=1 &>/dev/null")])]),a._v(" "),s("h3",{attrs:{id:"设置默认-tcp-连接痴呆时长为-3800-秒-此选项可以大大降低连接数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置默认-tcp-连接痴呆时长为-3800-秒-此选项可以大大降低连接数"}},[a._v("#")]),a._v(" 设置默认 TCP 连接痴呆时长为 3800 秒（此选项可以大大降低连接数）")]),a._v(" "),s("p",[s("code",[a._v("sysctl -w net.ipv4.netfilter.ip_conntrack_tcp_timeout_established=3800 &>/dev/null")])]),a._v(" "),s("h3",{attrs:{id:"设置支持最大连接树为-30w-这个根据你的内存和-iptables-版本来-每个-connection-需要-300-多个字节"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置支持最大连接树为-30w-这个根据你的内存和-iptables-版本来-每个-connection-需要-300-多个字节"}},[a._v("#")]),a._v(" 设置支持最大连接树为 30W（这个根据你的内存和 iptables 版本来，每个 connection 需要 300 多个字节）")]),a._v(" "),s("p",[s("code",[a._v("sysctl -w net.ipv4.ip_conntrack_max=300000 &>/dev/null")])]),a._v(" "),s("h3",{attrs:{id:"_192-168-0-50-某个ip-全部放行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_192-168-0-50-某个ip-全部放行"}},[a._v("#")]),a._v(" 192.168.0.50 某个IP 全部放行")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.50 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\niptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" FORWARD "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.50 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);