(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{476:function(e,t,s){"use strict";s.r(t);var _=s(2),v=Object(_.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"sed行首-添加字符-与行尾添加字符命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sed行首-添加字符-与行尾添加字符命令"}},[e._v("#")]),e._v(" Sed行首 添加字符 与行尾添加字符命令")]),e._v(" "),t("h2",{attrs:{id:"用sed命令在行首或行尾添加字符的命令有以下几种"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用sed命令在行首或行尾添加字符的命令有以下几种"}},[e._v("#")]),e._v(" 用sed命令在行首或行尾添加字符的命令有以下几种")]),e._v(" "),t("h3",{attrs:{id:"假设处理的文本为test-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#假设处理的文本为test-file"}},[e._v("#")]),e._v(" 假设处理的文本为test.file")]),e._v(" "),t("h3",{attrs:{id:"在每行的头添加字符-比如-head-命令如下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在每行的头添加字符-比如-head-命令如下"}},[e._v("#")]),e._v(' 在每行的头添加字符，比如"HEAD"，命令如下')]),e._v(" "),t("p",[t("code",[e._v("sed 's/^/HEAD&/g' test.file")])]),e._v(" "),t("h3",{attrs:{id:"在每行的行尾添加字符-比如-tail-命令如下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在每行的行尾添加字符-比如-tail-命令如下"}},[e._v("#")]),e._v(" 在每行的行尾添加字符，比如“TAIL”，命令如下")]),e._v(" "),t("p",[t("code",[e._v("sed 's/$/&TAIL/g' test.file")])]),e._v(" "),t("ol",[t("li",[t("p",[t("code",[e._v('"^"')]),e._v("代表行首，"),t("code",[e._v('"$"')]),e._v("代表行尾")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("'s/$/&TAIL/g'")]),e._v("中的字符g代表每行出现的字符全部替换，如果想在特定字符处添加，g就有用了，否则只会替换每行第一个，而不继续往后找了\n例：")])]),e._v(" "),t("li",[t("p",[e._v("如果想导出文件，在命令末尾加"),t("code",[e._v('"> outfile_name"')]),e._v("；如果想在原文件上更改，添加选项"),t("code",[e._v('"-i"')]),e._v("，如")])]),e._v(" "),t("li",[t("p",[e._v("也可以把两条命令和在一起，在"),t("code",[e._v("test.file")]),e._v("的每一行的行头和行尾分别添加字符"),t("code",[e._v('"HEAD"、“TAIL”')]),e._v("，命令：")])])]),e._v(" "),t("p",[t("code",[e._v("sed '/./{s/^/HEAD&/;s/$/&TAIL/}' test.file")])]),e._v(" "),t("p",[e._v("以上其实都还OK，昨天花太多时间，主要因为被处理的文件是用mysql从数据库提取的结果导出来的，别人给我之后我就直接处理，太脑残了= -我一直有点怀疑之所以结果不对，有可能是windows和linux换行的问题，可是因为对sed不熟，就一直在搞sed。\n \n众所周知（= -），"),t("code",[e._v("window")]),e._v("和"),t("code",[e._v("linux")]),e._v("的回车换行之云云，如果你知道了，跳过这一段，不知道，读一下呗：\nUnix系统里，每行结尾只有“<换行>”，即“\\n”；"),t("code",[e._v("Windows")]),e._v("系统里面，每行结尾是"),t("code",[e._v("“<换行><回 车>”")]),e._v("，即"),t("code",[e._v("“\\n\\r”")]),e._v("。一个直接后果是，Unix系统下的文件在Windows里打开的话，所有文字会变成一行；而Windows里的文件在Unix下打开的话，在每行的结尾可能会多出一个^M符号。\n \n好了，所以我的问题就出在被处理的文件的每行末尾都有^M符号，而这通常是看不出来的。可以用"),t("code",[e._v('"cat -A test.file"')]),e._v("命令查看。因此当我想在行尾添加字符的时候，它总是添加在行首且会覆盖掉原来行首的字符。\n要把文件转换一下，有两种方法：")]),e._v(" "),t("ol",[t("li",[e._v("命令"),t("code",[e._v("dos2unix test.file")])]),e._v(" "),t("li",[e._v("去掉"),t("code",[e._v('"\\r"')]),e._v(" ，用命令"),t("code",[e._v("sed -i 's/\\r//' test.file")])])])])}),[],!1,null,null,null);t.default=v.exports}}]);