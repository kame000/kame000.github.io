(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{551:function(a,s,t){"use strict";t.r(s);var n=t(2),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"zabbix使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zabbix使用"}},[a._v("#")]),a._v(" zabbix使用")]),a._v(" "),s("blockquote",[s("p",[a._v("注:本文以上使用的是openresty+php7+mysql+zabbix,没有使用官网用的apache作为web代理,如果想使用请到这里,")])]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.zabbix.com/documentation/3.4/zh/manual/installation/install_from_packages",target:"_blank",rel:"noopener noreferrer"}},[a._v("zabbix 手册"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"安装server端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装server端"}},[a._v("#")]),a._v(" 安装server端")]),a._v(" "),s("h3",{attrs:{id:"zabbix官方有提供各发行版的源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zabbix官方有提供各发行版的源"}},[a._v("#")]),a._v(" zabbix官方有提供各发行版的源")]),a._v(" "),s("p",[s("code",[a._v("rpm -ivh http://repo.zabbix.com/zabbix/3.4/rhel/7/x86_64/zabbix-release-3.4-1.el7.centos.noarch.rpm")])]),a._v(" "),s("h3",{attrs:{id:"安装zabbix-server包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装zabbix-server包"}},[a._v("#")]),a._v(" 安装zabbix server包：")]),a._v(" "),s("p",[s("code",[a._v("yum install zabbix-server-mysql zabbix-web-mysql")])]),a._v(" "),s("h3",{attrs:{id:"client安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#client安装"}},[a._v("#")]),a._v(" client安装：")]),a._v(" "),s("p",[s("code",[a._v("yum install zabbix-agent")])]),a._v(" "),s("h3",{attrs:{id:"zabbix需要数据库支持-通过上面的命令不会自动安装mysql-先安装mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zabbix需要数据库支持-通过上面的命令不会自动安装mysql-先安装mysql"}},[a._v("#")]),a._v(" zabbix需要数据库支持，通过上面的命令不会自动安装mysql，先安装mysql")]),a._v(" "),s("p",[s("code",[a._v("yum install mysql mysql-server")])]),a._v(" "),s("h3",{attrs:{id:"安装好后建立zabbix的数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装好后建立zabbix的数据库"}},[a._v("#")]),a._v(" 安装好后建立zabbix的数据库")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("      create database zabbix character "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" utf8 collate utf8_bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n      grant all privileges on zabbix.* to zabbix@"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'localhost'")]),a._v(" identified by ‘zabbix’"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h4",{attrs:{id:"然后导入zabbix的数据库文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#然后导入zabbix的数据库文件"}},[a._v("#")]),a._v(" 然后导入zabbix的数据库文件")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("      "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/share/doc/zabbix-server-mysql-2.2.9/create\n      mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uzabbix")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" zabbix "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" schema.sql\n      mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uzabbix")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" zabbix "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" images.sql\n      mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-uzabbix")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" zabbix "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" data.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h4",{attrs:{id:"导入成功后将数据库信息加入zabbix-server-conf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导入成功后将数据库信息加入zabbix-server-conf"}},[a._v("#")]),a._v(" 导入成功后将数据库信息加入zabbix_server.conf")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("      "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/zabbix/zabbix_server.conf\n      "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DBHost")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost\n      "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DBName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("zabbix\n      "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DBUser")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("zabbix\n      "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DBPassword")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("zabbix\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h4",{attrs:{id:"启动zabbix-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动zabbix-server"}},[a._v("#")]),a._v(" 启动zabbix server")]),a._v(" "),s("p",[s("code",[a._v("service zabbix-server start")])]),a._v(" "),s("h3",{attrs:{id:"安装openresty"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装openresty"}},[a._v("#")]),a._v(" 安装openresty")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v(" yum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" pcre-devel freetype-devel libtool mercurial pkgconfig zlib-devel openssl-devel\n\n "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://openresty.org/download/openresty-1.9.7.4.tar.gz\n\n "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" zxvf openresty-1.9.7.4.tar.gz\n\n "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" openresty-1.9.7.4 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" ./configure "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n        --with-http_flv_module "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n        --with-http_mp4_module "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" gmake "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("nproc"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" gmake "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n /usr/local/openresty/nginx/sbin/nginx\n参考官方文档安装 https://openresty.org/cn/installation.html\n这里不多介绍\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br")])]),s("h4",{attrs:{id:"启动配置nginx-conf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动配置nginx-conf"}},[a._v("#")]),a._v(" 启动配置nginx.conf")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\nlisten       "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nserver_name  localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#charset koi8-r;")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#access_log  logs/host.access.log  main;")]),a._v("\n\nclient_max_body_size 1024M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nroot /usr/share/zabbix"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## zabbix web文件目录")]),a._v("\nindex index.php index.html index.htm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nlocation / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v("/ /index.php?"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$query_string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#error_page  404              /404.html;")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# redirect server error pages to the static page /50x.html")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\nerror_page   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("500")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("502")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("503")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("504")]),a._v("  /50x.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlocation "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /50x.html "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    root   html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# proxy the PHP scripts to Apache listening on 127.0.0.1:80")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#location ~ \\.php$ {")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#    proxy_pass   http://127.0.0.1;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#}")]),a._v("\n\nlocation ~ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v(".php$ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v(" /index.php "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("404")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  fastcgi_split_path_info ^"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(".+"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v(".php"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("/.+"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  fastcgi_pass "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1:9000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  fastcgi_index index.php"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  fastcgi_param SCRIPT_FILENAME "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$document_root")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$fastcgi_script_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  include fastcgi_params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br")])]),s("p",[s("strong",[a._v("访问zabbix  web 文件目录监听80端口")])]),a._v(" "),s("h3",{attrs:{id:"安装php7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装php7"}},[a._v("#")]),a._v(" 安装php7")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# add yum repository")]),a._v("\nyum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" epel-release\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Uvh")]),a._v(" https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Uvh")]),a._v(" https://mirror.webtatic.com/yum/el7/webtatic-release.rpm\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# install php7")]),a._v("\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" php70w\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" php70w-devel php70w-pdo php70w-mysqlnd php70w-fpm php70w-opcache php70w-cli php70w-gd php70w-mcrypt php70w-mbstring php70w-xml\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更改php-fpm的启动用户与监听用户")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/^\\(listen.owner =\\).\\+/\\1 nobody/g'")]),a._v(" /etc/php-fpm.d/www.conf\n   "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/^\\(listen.group =\\).\\+/\\1 nobody/g'")]),a._v(" /etc/php-fpm.d/www.conf\n   "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/^\\(user =\\).\\+/\\1 nobody/g'")]),a._v(" /etc/php-fpm.d/www.conf\n   "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/^\\(group =\\).\\+/\\1 nobody/g'")]),a._v(" /etc/php-fpm.d/www.conf\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("h3",{attrs:{id:"在浏览器中访问-http-server-ip-zabbix-进行安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在浏览器中访问-http-server-ip-zabbix-进行安装"}},[a._v("#")]),a._v(" 在浏览器中访问：http://Server-IP/zabbix 进行安装")]),a._v(" "),s("blockquote",[s("p",[a._v("如果遇到 "),s("code",[a._v("PHP time zone unknown Fail")]),a._v("错误，编辑"),s("code",[a._v("/etc/httpd/conf.d/zabbix.conf")]),a._v(",设置：")])]),a._v(" "),s("p",[s("code",[a._v("php_value date.timezone PRC")])]),a._v(" "),s("p",[a._v("重启"),s("code",[a._v("openresty")]),a._v("即可。安装好后默认用户名密码："),s("code",[a._v("Admin/zabbix")])]),a._v(" "),s("h3",{attrs:{id:"配置选项及错误处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置选项及错误处理"}},[a._v("#")]),a._v(" 配置选项及错误处理")]),a._v(" "),s("h4",{attrs:{id:"中文设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#中文设置"}},[a._v("#")]),a._v(" 中文设置")]),a._v(" "),s("p",[a._v("zabbix 2.2 LTS默认是没有中文显示的，2.4版本后支持中文，设置中文方法：\n用admin登录后，点击右上角的profile，将language选成Chinese（zh_CN）,点更新即可。\nzabbix 2.2 版本要编译一下/usr/share/zabbix/include/locales.inc.php文件，设置成：")]),a._v(" "),s("p",[s("code",[a._v("'zh_CN' => array('name' => _('Chinese (zh_CN)'), 'display' => true),")])]),a._v(" "),s("h2",{attrs:{id:"grafana-安装使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#grafana-安装使用"}},[a._v("#")]),a._v(" grafana 安装使用")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" https://s3-us-west-2.amazonaws.com/grafana-releases/release/grafana-4.5.2-1.x86_64.rpm\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" grafana\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" grafana-server start\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" grafana-server.service\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h3",{attrs:{id:"使用grafana-cli工具安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用grafana-cli工具安装"}},[a._v("#")]),a._v(" 使用grafana-cli工具安装")]),a._v(" "),s("ul",[s("li",[a._v("获取可用插件列表")])]),a._v(" "),s("p",[s("code",[a._v("grafana-cli plugins list-remote")])]),a._v(" "),s("ul",[s("li",[a._v("安装zabbix插件")])]),a._v(" "),s("p",[s("code",[a._v("grafana-cli plugins install alexanderzobnin-zabbix-app")])]),a._v(" "),s("ul",[s("li",[a._v("安装插件完成之后重启garfana服务")])]),a._v(" "),s("p",[s("code",[a._v("service grafana-server restart")])]),a._v(" "),s("ul",[s("li",[a._v("使用grafana-zabbix-app源，其中包含最新版本的插件")])]),a._v(" "),s("p",[s("code",[a._v("cd /var/lib/grafana/plugins/")])]),a._v(" "),s("ul",[s("li",[a._v("克隆grafana-zabbix-app插件项目")])]),a._v(" "),s("p",[s("code",[a._v("git clone https://github.com/alexanderzobnin/grafana-zabbix-app")])]),a._v(" "),s("blockquote",[s("p",[a._v("注：如果没有git，请先安装git")])]),a._v(" "),s("p",[s("code",[a._v("yum –y install git")])]),a._v(" "),s("ul",[s("li",[a._v("插件安装完成重启garfana服务")])]),a._v(" "),s("p",[s("code",[a._v("service grafana-server restart")])]),a._v(" "),s("blockquote",[s("p",[a._v("注：通过这种方式，可以很容器升级插件")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /var/lib/grafana/plugins/grafana-zabbix-app\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" pull\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" grafana-server restart\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("官方网站：https://github.com/alexanderzobnin/grafana-zabbix")]),a._v(" "),s("p",[a._v("官网wiki：http://docs.grafana-zabbix.org/installation/")]),a._v(" "),s("blockquote",[s("p",[a._v("具体zabbix配置")])]),a._v(" "),s("p",[s("a",{attrs:{href:"http://docs.grafana-zabbix.org/installation/configuration/",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考官网:"),s("OutboundLink")],1),a._v(" "),s("a",{attrs:{href:"http://www.linuxprobe.com/zabbix-with-grafana.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("配置图标参考网址:"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);