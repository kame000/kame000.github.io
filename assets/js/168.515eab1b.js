(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{570:function(s,e,a){"use strict";a.r(e);var t=a(2),r=Object(t.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"一、前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[s._v("#")]),s._v(" 一、前言")]),s._v(" "),e("h3",{attrs:{id:"_1、zookeeper简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、zookeeper简介"}},[s._v("#")]),s._v(" 1、ZooKeeper简介")]),s._v(" "),e("p",[s._v("ZooKeeper是一个开源的分布式应用程序协调服务，是Google的Chubby一个开源的实现。ZooKeeper为分布式应用提供一致性服务，提供的功能包括：分布式同步（Distributed Synchronization）、命名服务（Naming Service）、集群维护（Group Maintenance）、分布式锁（Distributed Lock）等，简化分布式应用协调及其管理的难度，提供高性能的分布式服务。")]),s._v(" "),e("p",[s._v("ZooKeeper本身可以以单机模式安装运行，不过它的长处在于通过分布式ZooKeeper集群（一个Leader，多个Follower），基于一定的策略来保证ZooKeeper集群的稳定性和可用性，从而实现分布式应用的可靠性。")]),s._v(" "),e("h3",{attrs:{id:"_2、zookeeper集群角色说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、zookeeper集群角色说明"}},[s._v("#")]),s._v(" 2、ZooKeeper集群角色说明")]),s._v(" "),e("p",[s._v("ZooKeeper主要有领导者（Leader）、跟随者（Follower）和观察者（Observer）三种角色。")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("角色")]),s._v(" "),e("th",[s._v("说明")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("领导者（Leader）")]),s._v(" "),e("td",[s._v("为客户端提供读和写的服务，负责投票的发起和决议，更新系统状态。")])]),s._v(" "),e("tr",[e("td",[s._v("跟随者（Follower）")]),s._v(" "),e("td",[s._v("为客户端提供读服务，如果是写服务则转发给Leader。在选举过程中参与投票。")])]),s._v(" "),e("tr",[e("td",[s._v("观察者（Observer）")]),s._v(" "),e("td",[s._v("为客户端提供读服务器，如果是写服务则转发给Leader。不参与选举过程中的投票，也不参与“过半写成功”策略。在不影响写性能的情况下提升集群的读性能。此角色于zookeeper3.3系列新增的角色。")])])])]),s._v(" "),e("h2",{attrs:{id:"二、准备工作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、准备工作"}},[s._v("#")]),s._v(" 二、准备工作")]),s._v(" "),e("h3",{attrs:{id:"_1、集群节点规划"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、集群节点规划"}},[s._v("#")]),s._v(" 1、集群节点规划")]),s._v(" "),e("p",[s._v("ZooKeeper在提供分布式锁等服务的时候需要过半数的节点可用。另外高可用的诉求来说节点的个数必须>1，所以ZooKeeper集群需要是>1的奇数节点。例如3、5、7等等。\n本次我们规划三个节点，操作系统选用Centos7")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("节点名")]),s._v(" "),e("th",[s._v("IP")]),s._v(" "),e("th",[s._v("说明")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("zk01 （elk-1）")]),s._v(" "),e("td",[s._v("172.16.249.101")]),s._v(" "),e("td",[s._v("ZooKeeper节点")])]),s._v(" "),e("tr",[e("td",[s._v("zk02  （elk-2）")]),s._v(" "),e("td",[s._v("172.16.249.102")]),s._v(" "),e("td",[s._v("ZooKeeper节点")])]),s._v(" "),e("tr",[e("td",[s._v("zk03  （elk-3）")]),s._v(" "),e("td",[s._v("172.16.249.103")]),s._v(" "),e("td",[s._v("ZooKeeper节点")])])])]),s._v(" "),e("h3",{attrs:{id:"_2、软件版本说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、软件版本说明"}},[s._v("#")]),s._v(" 2、软件版本说明")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("项")]),s._v(" "),e("th",[s._v("说明")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("Linux Server")]),s._v(" "),e("td",[s._v("CentOS 7")])]),s._v(" "),e("tr",[e("td",[s._v("JDK（java）")]),s._v(" "),e("td",[s._v("1.8.0_161")])]),s._v(" "),e("tr",[e("td",[s._v("ZooKeeper")]),s._v(" "),e("td",[s._v("3.4.11")])])])]),s._v(" "),e("h3",{attrs:{id:"_3、部署jdk8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、部署jdk8"}},[s._v("#")]),s._v(" 3、部署JDK8")]),s._v(" "),e("p",[s._v("所有节点均需要安装JDK8\n参考CentOS下部署Java7/Java8： https://ken.io/note/centos-java-setup")]),s._v(" "),e("h2",{attrs:{id:"三、部署zookeeper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、部署zookeeper"}},[s._v("#")]),s._v(" 三、部署ZooKeeper")]),s._v(" "),e("p",[e("strong",[s._v("本次一共要部署三个ZooKeeper节点，所有文中没有指定机器的操作都表示每个节点都要执行该操作")])]),s._v(" "),e("h3",{attrs:{id:"_1、下载zookeeper-基础准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、下载zookeeper-基础准备"}},[s._v("#")]),s._v(" 1、下载ZooKeeper&基础准备")]),s._v(" "),e("ul",[e("li",[s._v("下载ZooKeeper")])]),s._v(" "),e("p",[s._v("官方镜像选择：https://mirrors.tuna.tsinghua.edu.cn/apache/zookeeper/")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://mirrors.tuna.tsinghua.edu.cn/apache/zookeeper/zookeeper-3.4.14/zookeeper-3.4.14.tar.gz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("创建ZooKeeper相关目录")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建应用目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/zookeeper\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建数据目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /zookeeper\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /zookeeper/data\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /zookeeper/logs\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ul",[e("li",[s._v("解压到指定目录")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zvxf")]),s._v(" zookeeper-3.4.14.tar.gz "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" /usr/zookeeper\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("配置环境变量")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改环境变量文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#最后增加以下内容")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ZOOKEEPER_HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/zookeeper/zookeeper-3.4.14\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ZOOKEEPER_HOME")]),s._v("/bin:"),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使环境变量生效")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看配置结果")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ZOOKEEPER_HOME")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("既然已配置环境变量，为了方便访问ZooKeeper目录\n后续通过$ZOOKEEPER_HOME代替/usr/zookeeper/zookeeper-3.4.11")]),s._v(" "),e("h3",{attrs:{id:"_2、配置zookeeper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、配置zookeeper"}},[s._v("#")]),s._v(" 2、配置ZooKeeper")]),s._v(" "),e("ul",[e("li",[s._v("ZooKeeper基础配置")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入ZooKeeper配置目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ZOOKEEPER_HOME")]),s._v("/conf\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" zoo_sample.cfg zoo.cfg\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#新建配置文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" zoo.cfg\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#清空原有配置文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" zoo.cfg\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#写入以下内容并保存")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tickTime")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("initLimit")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("syncLimit")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dataDir")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/zookeeper/data\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dataLogDir")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/zookeeper/logs\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("clientPort")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("server.1")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("elk-1:2888:3888\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("server.2")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("elk-2:2888:3888\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("server.3")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("elk-3:2888:3888\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("ul",[e("li",[s._v("配置节点标识")])]),s._v(" "),e("p",[s._v("zk01：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /zookeeper/data/myid\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("zk02：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /zookeeper/data/myid\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("zk03：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /zookeeper/data/myid\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_3、启动zookeeper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、启动zookeeper"}},[s._v("#")]),s._v(" 3、启动ZooKeeper")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入ZooKeeper bin目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ZOOKEEPER_HOME")]),s._v("/bin\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" zkServer.sh start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("出现以下字样表示启动成功：")]),s._v(" "),e("blockquote",[e("p",[s._v("ZooKeeper JMX enabled by default\nUsing config: /usr/zookeeper/zookeeper-3.4.11/bin/../conf/zoo.cfg\nStarting zookeeper … STARTED")])]),s._v(" "),e("h2",{attrs:{id:"四、集群查看-连接测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、集群查看-连接测试"}},[s._v("#")]),s._v(" 四、集群查看&连接测试")]),s._v(" "),e("h3",{attrs:{id:"_1、查看节点状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、查看节点状态"}},[s._v("#")]),s._v(" 1、查看节点状态")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ZOOKEEPER_HOME")]),s._v("/bin/zkServer.sh status\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#状态信息")]),s._v("\nZooKeeper JMX enabled by default\nUsing config: /usr/zookeeper/zookeeper-3.4.11/bin/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/conf/zoo.cfg\nMode: follower\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果为领导者节点则Mode:leader")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"_2、客户端连接测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、客户端连接测试"}},[s._v("#")]),s._v(" 2、客户端连接测试")]),s._v(" "),e("p",[s._v("这里随机选其中一个节点作为客户端连接其他节点即可")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定Server进行连接")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ZOOKEEPER_HOME")]),s._v("/bin/zkCli.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-server")]),s._v(" elk-3:2181\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#正常连接后会进入ZooKeeper命令行，显示如下：")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: elk-3:2181"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("输入命令测试：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看ZooKeeper根")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zk: elk-3:2181"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zookeeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"五、备注"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、备注"}},[s._v("#")]),s._v(" 五、备注")]),s._v(" "),e("h3",{attrs:{id:"_1、zookeeper常用配置项说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、zookeeper常用配置项说明"}},[s._v("#")]),s._v(" 1、ZooKeeper常用配置项说明")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("配置项")]),s._v(" "),e("th",[s._v("名称")]),s._v(" "),e("th",[s._v("ken.io 的说明")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("tickTime")]),s._v(" "),e("td",[s._v("CS通信心跳间隔")]),s._v(" "),e("td",[s._v("服务器之间或客户端与服务器之间维持心跳的时间间隔，也就是每间隔 tickTime 时间就会发送一个心跳。tickTime以毫秒为单位。")])]),s._v(" "),e("tr",[e("td",[s._v("initLimit")]),s._v(" "),e("td",[s._v("LF初始通信时限")]),s._v(" "),e("td",[s._v("集群中的follower服务器(F)与leader服务器(L)之间初始连接时能容忍的最多心跳数")])]),s._v(" "),e("tr",[e("td",[s._v("syncLimit")]),s._v(" "),e("td",[s._v("LF同步通信时限")]),s._v(" "),e("td",[s._v("集群中的follower服务器与leader服务器之间请求和应答之间能容忍的最多心跳数")])]),s._v(" "),e("tr",[e("td",[s._v("dataDir")]),s._v(" "),e("td",[s._v("数据文件目录")]),s._v(" "),e("td",[s._v("Zookeeper保存数据的目录，默认情况下，Zookeeper将写数据的日志文件也保存在这个目录里")])]),s._v(" "),e("tr",[e("td",[s._v("dataLogDir")]),s._v(" "),e("td",[s._v("日志文件目录")]),s._v(" "),e("td",[s._v("Zookeeper保存日志文件的目录")])]),s._v(" "),e("tr",[e("td",[s._v("clientPort")]),s._v(" "),e("td",[s._v("客户端连接端口")]),s._v(" "),e("td",[s._v("客户端连接 Zookeeper 服务器的端口，Zookeeper 会监听这个端口，接受客户端的访问请求")])]),s._v(" "),e("tr",[e("td",[s._v("server.N")]),s._v(" "),e("td",[s._v("服务器名称与地址")]),s._v(" "),e("td",[s._v("从N开始依次为：服务编号、服务地址、LF通信端口、选举端口；例如：server.1=192.168.88.11:2888:3888")])])])])])}),[],!1,null,null,null);e.default=r.exports}}]);