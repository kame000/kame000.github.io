(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{536:function(a,e,t){"use strict";t.r(e);var s=t(2),n=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"下载软件包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载软件包"}},[a._v("#")]),a._v(" 下载软件包")]),a._v(" "),e("blockquote",[e("p",[a._v("开始搭建Wiki前，需要下载一些软件包。")])]),a._v(" "),e("ul",[e("li",[a._v("confluence5.6.6")]),a._v(" "),e("li",[a._v("Confluence-5.6.6-language-pack-zh_CN")]),a._v(" "),e("li",[a._v("mysql-connector")]),a._v(" "),e("li",[a._v("confluence_keygen")])]),a._v(" "),e("h2",{attrs:{id:"安装配置java"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装配置java"}},[a._v("#")]),a._v(" 安装配置java")]),a._v(" "),e("p",[e("code",[a._v("yum install java java -version")])]),a._v(" "),e("h2",{attrs:{id:"安装配置mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装配置mysql"}},[a._v("#")]),a._v(" 安装配置mysql")]),a._v(" "),e("blockquote",[e("p",[a._v("安装mysql后，登录mysql控制台，执行如下命令：")])]),a._v(" "),e("p",[e("code",[a._v("create database confluence default character set utf8; grant all on confluence.* to 'confluenceuser'@'%' identified by 'confluencepasswd' with grant option; grant all on confluence.* to 'confluenceuser'@localhost identified by 'confluencepasswd' with grant option; flush privileges;")])]),a._v(" "),e("ul",[e("li",[a._v("进入/usr/local/mysql文件夹，在my.cnf中添加：")])]),a._v(" "),e("p",[e("code",[a._v("binlog_format=mixed")])]),a._v(" "),e("ul",[e("li",[a._v("重启mysql")])]),a._v(" "),e("p",[e("code",[a._v("service mysqld stop service mysqld start")])]),a._v(" "),e("ul",[e("li",[a._v("关闭防火墙")])]),a._v(" "),e("p",[e("code",[a._v("systemctl stop firewalld.service")])]),a._v(" "),e("h2",{attrs:{id:"详细步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#详细步骤"}},[a._v("#")]),a._v(" 详细步骤")]),a._v(" "),e("h3",{attrs:{id:"安装confluence"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装confluence"}},[a._v("#")]),a._v(" 安装confluence")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("使用xftp，上传atlassian-confluence-5.6.6-x64.bin到/root文件夹。")])]),a._v(" "),e("li",[e("p",[a._v("上传完成后，执行命令：")])])]),a._v(" "),e("p",[e("code",[a._v("chmod 755 atlassian-confluence-5.6.6-x64.bin ./atlassian-confluence-5.6.6-x64.bin")])]),a._v(" "),e("p",[a._v("confluence默认安装到"),e("code",[a._v("/opt/atlassian/confluence和/var/atlassian/application-data/confluence")]),a._v("目录下，并且confluence监听的端口是"),e("code",[a._v("8090")]),a._v("。")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("confluence的主要配置文件，存放在"),e("code",[a._v("/opt/atlassian/confluence/conf/server.xml")]),a._v("文件中。")])]),a._v(" "),e("li",[e("p",[a._v("测试访问，假设CentOS7的ip地址为192.168.56.101，那么在浏览器输入http://192.168.56.101:8089，即可看到Confluence的欢迎界面。")])])]),a._v(" "),e("h2",{attrs:{id:"破解confluence"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#破解confluence"}},[a._v("#")]),a._v(" 破解confluence")]),a._v(" "),e("h3",{attrs:{id:"点击-start-setup-看到如下界面。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#点击-start-setup-看到如下界面。"}},[a._v("#")]),a._v(" 点击“Start setup”，看到如下界面。")]),a._v(" "),e("h3",{attrs:{id:"复制server-id并保存-然后关闭confluence。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#复制server-id并保存-然后关闭confluence。"}},[a._v("#")]),a._v(" 复制Server ID并保存，然后关闭confluence。")]),a._v(" "),e("p",[e("code",[a._v("/etc/init.d/confluence stop")])]),a._v(" "),e("h3",{attrs:{id:"从-opt-atlassian-confluence-confluence-web-inf-lib中-拷贝atlassian-extras-decoder-v2-3-2-jar到windows-并重命名为atlassian-extras-2-4-jar。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#从-opt-atlassian-confluence-confluence-web-inf-lib中-拷贝atlassian-extras-decoder-v2-3-2-jar到windows-并重命名为atlassian-extras-2-4-jar。"}},[a._v("#")]),a._v(" 从/opt/atlassian/confluence/confluence/WEB-INF/lib中，拷贝atlassian-extras-decoder-v2-3.2.jar到windows，并重命名为atlassian-extras-2.4.jar。")]),a._v(" "),e("h3",{attrs:{id:"在windows下-生成license-key。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在windows下-生成license-key。"}},[a._v("#")]),a._v(" 在windows下，生成License Key。")]),a._v(" "),e("p",[e("code",[a._v("java -jar confluence_keygen.jar")])]),a._v(" "),e("p",[a._v("把第二步中复制的Server ID粘贴进去，然后点击“.gen!”，保存生成的key。")]),a._v(" "),e("h3",{attrs:{id:"打补丁。点击-patch-选择第3步中重命名的atlassian-extras-2-4-jar-会生成新的atlassian-extras-2-4-jar。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打补丁。点击-patch-选择第3步中重命名的atlassian-extras-2-4-jar-会生成新的atlassian-extras-2-4-jar。"}},[a._v("#")]),a._v(" 打补丁。点击“.patch!”，选择第3步中重命名的atlassian-extras-2.4.jar，会生成新的atlassian-extras-2.4.jar。")]),a._v(" "),e("h3",{attrs:{id:"上传新的atlassian-extras-2-4-jar、confluence-5-6-6-language-pack-zh-cn-jar、mysql-connector-java-5-1-39-bin-jar到-opt-atlassian-confluence-confluence-web-inf-lib-并且删除atlassian-extras-decoder-v2-3-2-jar。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上传新的atlassian-extras-2-4-jar、confluence-5-6-6-language-pack-zh-cn-jar、mysql-connector-java-5-1-39-bin-jar到-opt-atlassian-confluence-confluence-web-inf-lib-并且删除atlassian-extras-decoder-v2-3-2-jar。"}},[a._v("#")]),a._v(" 上传新的atlassian-extras-2.4.jar、Confluence-5.6.6-language-pack-zh_CN.jar、mysql-connector-java-5.1.39-bin.jar到/opt/atlassian/confluence/confluence/WEB-INF/lib，并且删除atlassian-extras-decoder-v2-3.2.jar。")]),a._v(" "),e("h3",{attrs:{id:"启动confluence"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动confluence"}},[a._v("#")]),a._v(" 启动confluence")]),a._v(" "),e("p",[e("code",[a._v("/etc/init.d/confluence start")])]),a._v(" "),e("h3",{attrs:{id:"把生成的key复制粘贴到license-key框中-点击-next-如果顺利进入选择数据库页面-说明破解成功。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#把生成的key复制粘贴到license-key框中-点击-next-如果顺利进入选择数据库页面-说明破解成功。"}},[a._v("#")]),a._v(" 把生成的key复制粘贴到License Key框中，点击“Next”，如果顺利进入选择数据库页面，说明破解成功。")]),a._v(" "),e("h2",{attrs:{id:"配置数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置数据库"}},[a._v("#")]),a._v(" 配置数据库")]),a._v(" "),e("h3",{attrs:{id:"数据库选择mysql-然后点击-external-database-进入数据库配置页面。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库选择mysql-然后点击-external-database-进入数据库配置页面。"}},[a._v("#")]),a._v(" 数据库选择MySQL，然后点击“External Database”，进入数据库配置页面。")]),a._v(" "),e("h3",{attrs:{id:"点击-direct-jdbc-user-name和password填写安装配置mysql中设置的用户名和密码。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#点击-direct-jdbc-user-name和password填写安装配置mysql中设置的用户名和密码。"}},[a._v("#")]),a._v(" 点击“Direct JDBC”，User Name和Password填写安装配置mysql中设置的用户名和密码。")]),a._v(" "),e("h3",{attrs:{id:"点击-next-这一步花费时间较长-请耐心等待。数据写入成功-进入如下页面。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#点击-next-这一步花费时间较长-请耐心等待。数据写入成功-进入如下页面。"}},[a._v("#")]),a._v(" 点击“Next”，这一步花费时间较长，请耐心等待。数据写入成功，进入如下页面。")]),a._v(" "),e("h3",{attrs:{id:"第3步如果报错-请检查mysql数据库配置-然后卸载后重新安装-卸载命令如下。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第3步如果报错-请检查mysql数据库配置-然后卸载后重新安装-卸载命令如下。"}},[a._v("#")]),a._v(" 第3步如果报错，请检查mysql数据库配置，然后卸载后重新安装，卸载命令如下。")]),a._v(" "),e("p",[e("code",[a._v("/etc/init.d/confluence stop cd /opt/atlassian/confluence/ ./uninstall")]),a._v("\n或者：\n"),e("code",[a._v("/etc/init.d/confluence stop rm -rf /opt/atlassian/ rm -rf /var/atlassian/")])]),a._v(" "),e("h2",{attrs:{id:"配置管理员"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置管理员"}},[a._v("#")]),a._v(" 配置管理员")]),a._v(" "),e("p",[a._v("初始化一个样例站点，根据提示进行配置。")]),a._v(" "),e("p",[e("strong",[a._v("书签")])]),a._v(" "),e("p",[a._v("wiki系统confluence5.6.6安装、中文、破解及迁移\nhttp://www.ilanni.com/?p=11989\nconfluence wiki搭建使用\nhttp://www.cnblogs.com/guiguj...")])])}),[],!1,null,null,null);e.default=n.exports}}]);